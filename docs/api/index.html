<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Narrative API Documentation - v0.3.1</title><meta name="description" content="Documentation for Narrative API Documentation"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">Narrative API Documentation - v0.3.1</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>Narrative API Documentation - v0.3.1</h1></div><div class="tsd-panel tsd-typography"><h1 id="narrative-desktop-mvp-tauri-v2-react--vite--tailwind-v4--ts" class="tsd-anchor-link">Narrative Desktop MVP (tauri v2 + React + Vite + Tailwind v4 + TS)<a href="#narrative-desktop-mvp-tauri-v2-react--vite--tailwind-v4--ts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1>
<p>Desktop MVP for exploring <strong>version control as a narrative medium</strong>.</p>
<p>Includes:</p>
<ul>
<li><strong>Demo mode</strong> mirroring the “branch narrative” layout (intent → session excerpts → files → diff → timeline).</li>
<li><strong>repo mode</strong>:
<ul>
<li>pick a local git repo</li>
<li>index recent commits</li>
<li>timeline navigation + per-commit files/diff on selection</li>
<li>caches commit metadata + file-change lists in <strong>SQLite</strong></li>
<li>writes <strong>committable</strong> narrative metadata into <code>.narrative/meta/**</code></li>
<li>supports <strong>manual session import</strong> into <code>.narrative/sessions/**</code> (with basic secret scrubbing)</li>
</ul>
</li>
</ul>
<hr>
<h2 id="prereqs" class="tsd-anchor-link">prereqs<a href="#prereqs" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<ul>
<li>Node.js + pnpm</li>
<li>Rust toolchain</li>
<li>tauri system deps for your OS (see tauri docs)</li>
<li><code>git</code> available on PATH (repo mode executes <code>git</code> via <code>tauri-plugin-shell</code>)</li>
</ul>
<hr>
<h2 id="quick-start" class="tsd-anchor-link">Quick Start<a href="#quick-start" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<ol>
<li>
<p><strong>Install dependencies</strong>:</p>
<pre><code class="bash"><span class="hl-0">pnpm</span><span class="hl-1"> </span><span class="hl-2">install</span>
</code><button type="button">Copy</button></pre>

</li>
<li>
<p><strong>Run the app</strong>:</p>
<pre><code class="bash"><span class="hl-0">pnpm</span><span class="hl-1"> </span><span class="hl-2">tauri</span><span class="hl-1"> </span><span class="hl-2">dev</span>
</code><button type="button">Copy</button></pre>

</li>
<li>
<p><strong>Open a repository</strong>:</p>
<ul>
<li>Click &quot;Open repo...&quot; and select a git repository</li>
<li>Navigate commits and see files changed</li>
</ul>
</li>
<li>
<p><strong>Import a session</strong> (optional):</p>
<ul>
<li>Click &quot;Import session...&quot; and select a JSON session file</li>
<li>See session excerpts in the right panel</li>
</ul>
</li>
</ol>
<h2 id="docs" class="tsd-anchor-link">Docs<a href="#docs" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<ul>
<li><code>docs/README.md</code> — docs index (start here)</li>
<li><code>docs/agents/development.md</code> — dev prerequisites + run/build commands</li>
<li><code>docs/agents/testing.md</code> — lint, Typecheck, and test commands</li>
<li><code>docs/agents/tauri.md</code> — tauri permissions + data locations</li>
<li><code>docs/agents/repo-structure.md</code> — repo layout overview</li>
<li><code>docs/agents/repair-agent.md</code> — autonomous CI repair agent workflow</li>
<li><code>pnpm docs:lint</code> — run Vale + markdownlint for docs</li>
</ul>
<hr>
<h2 id="run-dev" class="tsd-anchor-link">Run (dev)<a href="#run-dev" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<pre><code class="bash"><span class="hl-0">pnpm</span><span class="hl-1"> </span><span class="hl-2">install</span><br/><span class="hl-0">pnpm</span><span class="hl-1"> </span><span class="hl-2">tauri</span><span class="hl-1"> </span><span class="hl-2">dev</span>
</code><button type="button">Copy</button></pre>

<hr>
<h2 id="tauri-v2-permissions-important" class="tsd-anchor-link">tauri v2 permissions (important)<a href="#tauri-v2-permissions-important" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<p>tauri v2 requires explicit permissions for plugins.</p>
<p>This MVP enables (see <code>src-tauri/capabilities/default.json</code>):</p>
<ul>
<li><code>dialog:allow-open</code> — choose a repo folder / import a session file</li>
<li><code>shell:allow-execute</code> — scoped to only the <code>git</code> program</li>
<li><code>sql:default</code> + <code>sql:allow-execute</code> — SQLite caching</li>
</ul>
<hr>
<h2 id="what-gets-written-to-your-repo" class="tsd-anchor-link">What gets written to your repo<a href="#what-gets-written-to-your-repo" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<p>When you open a repo, the app creates:</p>
<ul>
<li><code>.narrative/meta/repo.json</code></li>
<li><code>.narrative/meta/branches/&lt;branch&gt;.json</code></li>
<li><code>.narrative/meta/commits/&lt;sha&gt;.json</code> for indexed commits</li>
<li>(lazy) <code>.narrative/meta/commits/&lt;sha&gt;.files.json</code> once you click a commit</li>
</ul>
<p>These files are <strong>committable</strong> (shareable narrative layer).</p>
<hr>
<h2 id="sessions" class="tsd-anchor-link">Sessions<a href="#sessions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<p>Use <strong>Import session…</strong> (repo tab) to import a JSON file.</p>
<p>Example schema: <code>examples/session.example.json</code>.</p>
<ul>
<li>The importer performs basic secret redaction before writing into <code>.narrative/sessions/imported/*</code>.</li>
<li>The UI will show the latest imported session in the “Session Excerpts” panel (MVP: branch-level, not commit-linked yet).</li>
</ul>
<hr>
<h2 id="local-cache" class="tsd-anchor-link">Local cache<a href="#local-cache" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<p>SQLite file: <code>sqlite:narrative.db</code> (managed by <code>tauri-plugin-sql</code>)</p>
<p>Schema/migration: <code>src-tauri/migrations/001_init.sql</code></p>
<p>Do <strong>not</strong> commit this cache file.</p>
<hr>
<h2 id="next-expansions" class="tsd-anchor-link">Next expansions<a href="#next-expansions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2>
<ul>
<li>Parse Claude Code / Codex CLI native logs and auto-link sessions to commits.</li>
<li>Commit–session linking via trailers, git notes, and timestamp+file overlap heuristics.</li>
<li>Multi-level abstraction: commit → session → milestone → branch narrative.</li>
<li>“Speculate” mode: simulate alternative future paths using constraints learned from history.</li>
</ul>
<hr>
<p><img
  src="./brand/brand-mark.webp"
  srcset="./brand/brand-mark.webp 1x, ./brand/brand-mark@2x.webp 2x"
  alt="brAInwav"
  height="28"
  align="left"
/></p>
<br clear="left" />
<p><strong>brAInwav</strong>
<em>from demo to duty</em></p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#narrative-desktop-mvp-tauri-v2-react--vite--tailwind-v4--ts"><span>Narrative <wbr/>Desktop <wbr/>MVP (tauri v2 + <wbr/>React + <wbr/>Vite + <wbr/>Tailwind v4 + <wbr/>TS)</span></a><ul><li><a href="#prereqs"><span>prereqs</span></a></li><li><a href="#quick-start"><span>Quick <wbr/>Start</span></a></li><li><a href="#docs"><span>Docs</span></a></li><li><a href="#run-dev"><span>Run (dev)</span></a></li><li><a href="#tauri-v2-permissions-important"><span>tauri v2 permissions (important)</span></a></li><li><a href="#what-gets-written-to-your-repo"><span>What gets written to your repo</span></a></li><li><a href="#sessions"><span>Sessions</span></a></li><li><a href="#local-cache"><span>Local cache</span></a></li><li><a href="#next-expansions"><span>Next expansions</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">Narrative API Documentation - v0.3.1</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
